"use strict";(self.webpackChunkplaain=self.webpackChunkplaain||[]).push([[795],{6695:function(e,s,n){n.r(s),n.d(s,{default:function(){return Ee}});var t=n(6871),i=n(885),r=n(2791),o=n(6469),a=n(4744),l=n(1808),c=n(4242),d=n(8933),u=n(184),h=function(e){var s=e.url,n=e.alt;return(0,u.jsx)("img",{className:"Cover",src:s,alt:n})},f=n(3504),x=n(2020),m=function(e){var s=e.id,n=e.items,t=(0,x.$)().t;return(0,u.jsx)("div",{className:"HorizontalSlide",id:s,children:(0,u.jsx)(l.t,{spaceBetween:15,slidesPerView:"auto",slidesOffsetBefore:20,slidesOffsetAfter:20,grabCursor:!0,children:n.length>0?n.map((function(e,s){return(0,u.jsx)(c.o,{children:(0,u.jsx)(f.rU,{to:(0,d.Qf)(e),children:(0,u.jsx)(h,{url:(0,d.zn)(e.posterPath),alt:e.title})})},s)})):(0,u.jsx)(c.o,{children:(0,u.jsx)("h3",{children:t("Nothing found.")})})})})},j=n(1054),v=n(6030),p=function(e,s){var n=new j.Index({tokenize:"forward"});return e.forEach((function(e){return n.add(e.id,s(e))})),n},g=function(){var e=(0,x.$)().t,s=(0,t.s0)(),n=(0,t.TH)(),l=(0,r.useMemo)((function(){return new URLSearchParams(n.search).get("q")}),[n]),c=(0,v.v9)((function(e){return{movies:e.movies,shows:e.shows}})),h=c.movies,f=c.shows,j=(0,r.useState)(l||""),g=(0,i.Z)(j,2),b=g[0],y=g[1],w=(0,r.useMemo)((function(){return p((0,o.bJ)(h),(function(e){return"".concat(e.title,";").concat(e.summary)}))}),[h]),_=(0,r.useMemo)((function(){return p((0,a.g)(f),(function(e){return"".concat(e.title,";").concat(e.summary)}))}),[f]),N=(0,r.useMemo)((function(){return w.search(b).map((function(e){return(0,o.XA)(e)(h)})).filter(d.Av)}),[w,b]),k=(0,r.useMemo)((function(){return _.search(b).map((function(e){return(0,a.u)(e)(f)})).filter(d.Av)}),[_,b]),P=(0,r.useCallback)((function(e){s("/app/find?".concat("q","=").concat(e.target.value),{replace:!0}),y(e.target.value)}),[s,y]);return(0,o.bJ)(h).length>0||(0,a.g)(f).length>0?(0,u.jsxs)("div",{className:"Find",children:[(0,u.jsx)("form",{children:(0,u.jsx)("input",{autoFocus:!0,value:b,placeholder:e("Search your library"),onChange:P})}),N&&Object.keys(N).length>0&&(0,u.jsxs)("section",{children:[(0,u.jsx)("h2",{children:e("Movies")}),(0,u.jsx)(m,{items:N,id:"movies"})]}),k&&Object.keys(k).length>0&&(0,u.jsxs)("section",{children:[(0,u.jsx)("h2",{children:e("TV shows")}),(0,u.jsx)(m,{items:k,id:"shows"})]})]}):(0,u.jsx)(t.Fg,{to:"/app"})},b=n(2982),y=n(2154),w=n(5416),_=n(6916),N=(0,_.P1)([function(e){return(0,o.Wl)(e.movies)},function(e){return(0,y.Wl)(e.seasons)}],(function(e,s){return[].concat((0,b.Z)(e),(0,b.Z)(s))})),k=(0,_.P1)([function(e){return(0,o.rN)(e.movies)},function(e){return(0,y.rN)(e.seasons)}],(function(e,s){return[].concat((0,b.Z)(e),(0,b.Z)(s))})),P=function(e){var s=e.onIndex,n=(0,x.$)().t;return(0,u.jsxs)("div",{className:"Authenticated",children:[(0,u.jsx)("h2",{children:n("Get started")}),(0,u.jsx)("p",{children:n("You signed into a cloud service, but we didn't find any movies or TV shows.")}),(0,u.jsx)("p",{children:n("It's likely that you just have to move some of your files around and create some folders to make it work.")}),(0,u.jsx)("p",{children:n("Reference the getting started guide to learn how to organize your files so that Plaain finds them. After you're done, just re-index.")}),(0,u.jsxs)("div",{className:"Authenticated__buttons",children:[(0,u.jsx)("a",{className:"button primary",href:"https://github.com/jonhue/plaain#getting-started",target:"_blank",rel:"noopener noreferrer",children:n("Getting started")}),(0,u.jsx)("button",{onClick:s,children:n("Index")})]})]})},C=function(e){var s=e.inProgress,n=e.recentlyWatched,t=(0,x.$)().t;return(0,u.jsxs)("div",{className:"ForYou",children:[s.length>0&&(0,u.jsxs)("section",{children:[(0,u.jsx)("h2",{children:t("Continue watching")}),(0,u.jsx)(m,{items:s,id:"inProgress"})]}),n.length>0&&(0,u.jsxs)("section",{children:[(0,u.jsx)("h2",{children:t("Recently watched")}),(0,u.jsx)(m,{items:n,id:"recentlyWatched"})]})]})},S=function(e){var s=e.movies,n=e.shows,t=(0,x.$)().t;return(0,u.jsxs)("div",{className:"Setup",children:[(0,u.jsx)("h2",{children:t("Get started")}),(0,u.jsx)("p",{children:t("Here, you'll be able to find your recently watched movie or the show you didn't finish yet.")}),(0,u.jsxs)("div",{className:"Setup__buttons",children:[s.length>0&&(0,u.jsx)(f.rU,{to:"/app/movies",className:"button",children:t("Discover your movies")}),n.length>0&&(0,u.jsx)(f.rU,{to:"/app/shows",className:"button",children:t("Discover your shows")})]})]})},Z=n(6899),F=function(){var e=(0,x.$)().t;return(0,u.jsxs)("div",{className:"Unauthenticated",children:[(0,u.jsx)("h2",{children:e("Get started")}),(0,u.jsx)("p",{children:e("To watch your movies and TV shows, you first have to sign in with the cloud service that hosts your media.")}),(0,u.jsx)(f.rU,{to:"/app/settings",className:"button",children:e("Authenticate")}),(0,u.jsx)("p",{className:"small",children:(0,u.jsxs)(Z.c,{children:["Note that Plaain may ",(0,u.jsx)("span",{className:"bold",children:"not"})," be used to stream pirated content or publicly share your private media library. You may only connect to your private cloud storage."]})})]})},A=n(4375),M=n(5939),T=n(607),D=function(){var e=(0,v.I0)(),s=(0,v.v9)((function(e){return{inProgress:(0,d.mE)(N(e)),movies:(0,o.bJ)(e.movies),providers:(0,T.X)(e.auth),recentlyWatched:(0,d.mE)(k(e)),shows:(0,a.g)(e.shows)}})),n=s.inProgress,t=s.movies,i=s.providers,l=s.recentlyWatched,c=s.shows,h=(0,r.useCallback)((function(){e((0,M.z)((0,A.Kz)(i)))}),[e,i]);return n.length>0||l.length>0?(0,u.jsx)(C,{inProgress:n,recentlyWatched:l}):0===i.length?(0,u.jsx)(F,{}):0===t.length&&0===c.length?(0,u.jsx)(P,{onIndex:h}):(0,u.jsx)(S,{movies:t,shows:c})},$=n(5852),E=function(e){var s=e.files,n=(0,x.$)().t;return(0,u.jsxs)("div",{className:"FileList",children:[s.map((function(e,s){return(0,u.jsx)("p",{className:"small",children:e.name},s)})),0===s.length&&(0,u.jsx)("p",{className:"small",children:n("None")})]})},U=n(9462),z=function(e){var s=(0,r.useState)(e),n=(0,i.Z)(s,2),t=n[0],o=n[1];return[t,(0,r.useCallback)((function(){return o((function(e){return!e}))}),[o])]},W=function(e){var s=e.people,n=e.details,t=(0,x.$)().t,o=z(!0),a=(0,i.Z)(o,2),l=a[0],c=a[1],h=(0,r.useMemo)((function(){return s.slice(0,l?10:s.length)}),[l,s]);return(0,u.jsxs)("div",{className:"PersonList",children:[s.length>0?h.map((function(e,s){return(0,u.jsxs)("p",{children:[(0,u.jsx)(f.rU,{to:(0,d.Qf)(e),children:e.name})," \xb7"," ",(0,u.jsx)("span",{children:n(e)})]},s)})):(0,u.jsx)("p",{children:t("None")}),s.length>10&&(0,u.jsx)("span",{onClick:c,children:t(l?"Show more":"Show less")})]})},I=n(1694),Y=n.n(I),L=function(){var e=(0,x.$)().t,s=(0,t.s0)(),n=(0,t.UO)().id,i=(0,v.v9)((function(e){return(0,o.XA)(n)(e.movies)})),a=(0,r.useCallback)((function(){void 0!==i&&s("/player?id=".concat(i.id,"&type=").concat(i.kind,"&s=").concat(i.usage.progress))}),[i,s]),l=(0,r.useCallback)((function(){void 0!==i&&s("/player?id=".concat(i.id,"&type=").concat(i.kind))}),[i,s]);return void 0!==i?(0,u.jsxs)("div",{className:"Movie",children:[(0,u.jsx)($.Y,{url:(0,d.nC)(i.backdropPath)}),(0,u.jsxs)("div",{className:"Movie__details",children:[(0,u.jsx)(h,{url:(0,d.zn)(i.posterPath),alt:"poster"}),(0,u.jsx)("h1",{children:i.title}),(0,u.jsxs)("div",{className:"Movie__information",children:[(0,u.jsx)("p",{className:"small",children:new Date(i.releaseDate).getFullYear()}),i.duration&&(0,u.jsx)("p",{className:"small",children:(0,d.a0)(e,i.duration)})]}),(0,u.jsxs)("div",{className:"Movie__actions",children:[(0,d.n2)(i)&&(0,u.jsx)("button",{className:"primary",onClick:a,disabled:0===i.sources.length,children:e("Continue")}),(0,u.jsx)("button",{className:Y()({primary:!(0,d.n2)(i)}),onClick:l,disabled:0===i.sources.length,children:e("Watch")}),(0,u.jsx)("a",{className:"button",href:i.trailerUrl,target:"_blank",rel:"noopener noreferrer",children:e("Play trailer")})]}),(0,u.jsx)("p",{className:"Movie__overview",children:i.summary}),(0,u.jsxs)("div",{className:"Movie__people",children:[(0,u.jsxs)("div",{className:"Movie__people__cast",children:[(0,u.jsx)("h4",{children:e("Starring")}),(0,u.jsx)(W,{people:i.cast,details:function(e){return e.character}})]}),(0,u.jsxs)("div",{className:"Movie__people__crew",children:[(0,u.jsx)("h4",{children:e("Crew")}),(0,u.jsx)(W,{people:i.crew,details:function(s){return(0,d.FE)(e,s.job,s.gender)}})]})]})]}),(0,u.jsx)("div",{className:"Movie__sources",children:(0,u.jsxs)("div",{children:[(0,u.jsx)("h4",{children:e("Sources")}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"Movie__sources__versions",children:[(0,u.jsx)("h5",{children:e("Versions")}),(0,u.jsx)(E,{files:i.sources})]}),(0,u.jsxs)("div",{className:"Movie__sources__captions",children:[(0,u.jsx)("h5",{children:e("Subtitles")}),(0,u.jsx)(E,{files:i.captions})]})]})]})})]}):(0,u.jsx)(U.T,{})},V=function(e){var s=e.items,n=(0,x.$)().t;return(0,u.jsx)("div",{className:"ItemGrid",children:s.length>0?s.map((function(e,s){return(0,u.jsx)("div",{className:"ItemGrid__item",children:(0,u.jsx)(f.rU,{to:(0,d.Qf)(e),children:(0,u.jsx)(h,{url:(0,d.zn)(e.posterPath),alt:e.title})})},s)})):(0,u.jsx)("div",{className:"ItemGrid__item",children:(0,u.jsx)("h3",{children:n("Nothing found.")})})})},G=n(9950),H=n(5175);G.Z.use([H.Z]);var J,O=function(e){var s=e.id,n=e.items,t=e.path,i=(0,x.$)().t;return(0,u.jsx)("div",{className:"VerticalSlide",id:s,children:(0,u.jsx)(l.t,{direction:"vertical",slidesPerView:"auto",grabCursor:!0,effect:"coverflow",coverflowEffect:{rotate:0,stretch:425,depth:150,modifier:1,slideShadows:!1},history:{replaceState:!0,key:t},children:n.length>0?n.map((function(e,s){return(0,u.jsx)(c.o,{"data-history":e.id,children:(0,u.jsx)(f.rU,{to:(0,d.Qf)(e),children:(0,u.jsx)(h,{url:(0,d.zn)(e.posterPath),alt:e.title})})},s)})):(0,u.jsx)(c.o,{children:(0,u.jsx)("h3",{children:i("Nothing found.")})})})})},R=function(){var e=(0,v.v9)((function(e){return(0,d.a)((0,o.bJ)(e.movies),(function(e){return e.title}))}));return e.length>0?(0,u.jsxs)("div",{className:"Movies",children:[(0,u.jsx)(O,{items:e,path:"movies",id:"movies"}),(0,u.jsx)(V,{items:e})]}):(0,u.jsx)(t.Fg,{to:"/app"})},B=n(4607),Q=function(){return(0,u.jsxs)(B.J,{className:"zoom",width:24,height:24,children:[(0,u.jsx)("title",{children:"Find"}),(0,u.jsxs)("g",{fill:"#ffffff",children:[(0,u.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"22",x2:"15.656",y1:"22",y2:"15.656"}),(0,u.jsx)("circle",{cx:"10",cy:"10",fill:"none",r:"8",stroke:"#ffffff"})]})]})},X=function(){return(0,u.jsxs)(B.J,{className:"popcorn",width:24,height:24,children:[(0,u.jsx)("title",{children:"For You"}),(0,u.jsxs)("g",{fill:"#ffffff",children:[(0,u.jsx)("polygon",{fill:"none",points:"21 7 3 7 5 23 19 23 21 7",stroke:"#ffffff"}),(0,u.jsx)("path",{d:"M19,5a3,3,0,0,0-3-3,2.97,2.97,0,0,0-1.47.4,2.986,2.986,0,0,0-5.06,0A2.97,2.97,0,0,0,8,2,3,3,0,0,0,5,5",fill:"none",stroke:"#ffffff"}),(0,u.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"9",x2:"8",y1:"23",y2:"7"}),(0,u.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"15",x2:"16",y1:"23",y2:"7"})]})]})},q=function(){return(0,u.jsxs)(B.J,{className:"movie-61",width:24,height:24,children:[(0,u.jsx)("title",{children:"Movie"}),(0,u.jsxs)("g",{fill:"#ffffff",children:[(0,u.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"1",x2:"1",y1:"1",y2:"23"}),(0,u.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"23",x2:"23",y1:"1",y2:"23"}),(0,u.jsx)("rect",{height:"22",width:"14",fill:"none",stroke:"#ffffff",x:"5",y:"1"}),(0,u.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"1",x2:"23",y1:"12",y2:"12"}),(0,u.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"1",x2:"5",y1:"8",y2:"8"}),(0,u.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"1",x2:"5",y1:"4",y2:"4"}),(0,u.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"19",x2:"23",y1:"8",y2:"8"}),(0,u.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"19",x2:"23",y1:"4",y2:"4"}),(0,u.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"19",x2:"23",y1:"20",y2:"20"}),(0,u.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"19",x2:"23",y1:"16",y2:"16"}),(0,u.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"1",x2:"5",y1:"20",y2:"20"}),(0,u.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"1",x2:"5",y1:"16",y2:"16"})]})]})},K=function(){return(0,u.jsxs)(B.J,{className:"settings-gear",width:24,height:24,children:[(0,u.jsx)("title",{children:"Settings"}),(0,u.jsxs)("g",{fill:"#ffffff",stroke:"#ffffff",children:[(0,u.jsx)("circle",{cx:"12",cy:"12",fill:"none",r:"3"}),(0,u.jsx)("path",{d:"M20,12a8.049,8.049,0,0,0-.188-1.713l2.714-2.055-2-3.464L17.383,6.094a7.987,7.987,0,0,0-2.961-1.719L14,1H10L9.578,4.375A7.987,7.987,0,0,0,6.617,6.094L3.474,4.768l-2,3.464,2.714,2.055a7.9,7.9,0,0,0,0,3.426L1.474,15.768l2,3.464,3.143-1.326a7.987,7.987,0,0,0,2.961,1.719L10,23h4l.422-3.375a7.987,7.987,0,0,0,2.961-1.719l3.143,1.326,2-3.464-2.714-2.055A8.049,8.049,0,0,0,20,12Z",fill:"none",stroke:"#ffffff"})]})]})},ee=function(){return(0,u.jsxs)(B.J,{className:"desktop-screen",width:24,height:24,children:[(0,u.jsx)("title",{children:"Show"}),(0,u.jsxs)("g",{fill:"#ffffff",children:[(0,u.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"12",x2:"12",y1:"22",y2:"18"}),(0,u.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"6",x2:"18",y1:"22",y2:"22"}),(0,u.jsx)("rect",{height:"16",width:"22",fill:"none",stroke:"#ffffff",x:"1",y:"2"})]})]})},se=function(e){var s=e.children,n=e.to,i=e.inexact,r=e.disabled,o=!!(0,t.bS)({path:"".concat(n).concat(i?"/*":"")});return(0,u.jsx)(f.rU,{className:Y()("Tab",{active:o,disabled:r}),to:n,children:s})},ne=function(e){var s=e.moviesDisabled,n=e.showsDisabled,t=(0,x.$)().t;return(0,u.jsx)("div",{className:"Nav",children:(0,u.jsxs)("div",{className:"Nav__wrapper",children:[(0,u.jsxs)(se,{to:"/app",children:[(0,u.jsx)(X,{}),(0,u.jsx)("p",{children:t("For you")})]}),(0,u.jsxs)(se,{disabled:s,to:"/app/movies",inexact:!0,children:[(0,u.jsx)(q,{}),(0,u.jsx)("p",{children:t("Movies")})]}),(0,u.jsxs)(se,{disabled:n,to:"/app/shows",inexact:!0,children:[(0,u.jsx)(ee,{}),(0,u.jsx)("p",{children:t("Shows")})]}),(0,u.jsxs)(se,{disabled:s&&n,to:"/app/find",children:[(0,u.jsx)(Q,{}),(0,u.jsx)("p",{children:t("Find")})]}),(0,u.jsxs)(se,{to:"/app/settings",children:[(0,u.jsx)(K,{}),(0,u.jsx)("p",{children:t("Settings")})]})]})})},te=function(){var e=(0,x.$)().t,s=(0,t.UO)().id,n=(0,v.v9)((function(e){return function(e){return(0,_.P1)([function(s){var n=s.movies;return(0,o.Hc)(e,(function(e){return e.cast}))(n)},function(s){var n=s.movies;return(0,o.Hc)(e,(function(e){return e.crew}))(n)},function(s){var n=s.seasons;return(0,y.nH)(e,(function(e){return e.cast}))(n)},function(s){var n=s.seasons;return(0,y.nH)(e,(function(e){return e.crew}))(n)}],(function(s,n,t,i){return[].concat((0,b.Z)(s),(0,b.Z)(n),(0,b.Z)(t),(0,b.Z)(i)).reduce((function(s,n){return{kind:w.m.Person,id:e,tmdbId:n.tmdbId,name:n.name,gender:n.gender,profilePath:n.profilePath,jobs:void 0===n.job?null===s||void 0===s?void 0:s.jobs:void 0!==s&&void 0!==s.jobs?(0,b.Z)(new Set([].concat((0,b.Z)(s.jobs),[n.job]))):[n.job]}}),void 0)}))}(s)(e)})),i=(0,v.v9)((function(e){return{movies:n&&(0,o.fw)(n.id)(e.movies),seasons:n&&(0,y.wT)(n.id)(e.seasons)}})),a=i.movies,l=i.seasons,c=(0,r.useMemo)((function(){return void 0!==a&&a.length>0?a[0].backdropPath:void 0!==l&&l.length>0?l[0].showBackdropPath:void 0}),[a,l]);return void 0!==n&&void 0!==a&&void 0!==l?(0,u.jsxs)("div",{className:"Person",children:[(0,u.jsx)($.Y,{url:(0,d.nC)(c)}),(0,u.jsxs)("div",{className:"Person__details",children:[(0,u.jsx)(h,{url:(0,d.zn)(n.profilePath),alt:"profile"}),(0,u.jsx)("h1",{children:n.name}),n.jobs&&(0,u.jsx)("p",{children:n.jobs.map((function(s){return(0,d.FE)(e,s,n.gender)})).join(", ")})]}),a.length>0&&(0,u.jsxs)("div",{className:"Person__movies",children:[(0,u.jsx)("h2",{children:e("Movies")}),(0,u.jsx)(m,{items:a,id:"movies"})]}),l.length>0&&(0,u.jsxs)("div",{className:"Person__seasons",children:[(0,u.jsx)("h2",{children:e("TV seasons")}),(0,u.jsx)(m,{items:l,id:"seasons"})]})]}):(0,u.jsx)(U.T,{})},ie=function(e){var s=e.episode,n=e.onClick,t=(0,x.$)().t;return(0,u.jsxs)("div",{className:Y()("EpisodeEntry",{disabled:0===s.sources.length}),onClick:n,children:[(0,u.jsx)("div",{className:"EpisodeEntry__number",children:s.number}),(0,u.jsxs)("div",{className:"EpisodeEntry__details",children:[(0,u.jsx)("h2",{children:s.title}),(0,u.jsxs)("p",{className:"small",children:[t("Aired")," ",new Date(s.airDate).toDateString()]}),(0,u.jsx)("p",{children:s.summary})]})]})},re=n(2690),oe=function(){var e=(0,x.$)().t,s=(0,t.s0)(),n=(0,t.UO)().id,o=(0,v.v9)((function(e){return(0,y.HR)(n)(e.seasons)})),l=(0,v.v9)((function(e){return{show:o&&(0,a.u)(o.showId)(e.shows),episodes:o&&(0,d.wj)((0,re.Mj)(o.id)(e.episodes),(function(e){return e.number}))}})),c=l.show,f=l.episodes,m=(0,r.useMemo)((function(){if(void 0!==o&&void 0!==f)return f.find((function(e){return e.number===o.usage.progress}))}),[o,f]),j=z(!1),p=(0,i.Z)(j,2),g=p[0],b=p[1],w=(0,r.useCallback)((function(e){return function(){s("/player?id=".concat(e.id,"&type=").concat(e.kind,"&s=").concat(e.usage.progress))}}),[s]),_=(0,r.useCallback)((function(e){return function(){if(void 0!==f){var n=f.find((function(s){return s.number===e}));s("/player?id=".concat(n.id,"&type=").concat(n.kind))}}}),[f,s]);return void 0!==c&&void 0!==o&&void 0!==f?(0,u.jsxs)("div",{className:"Season",children:[(0,u.jsx)($.Y,{url:(0,d.nC)(o.showBackdropPath)}),(0,u.jsxs)("div",{className:"Season__details",children:[(0,u.jsx)(h,{url:(0,d.zn)(o.posterPath),alt:"poster"}),(0,u.jsxs)("h1",{children:[e("Season")," ",o.number]}),(0,u.jsxs)("div",{className:"Season__information",children:[(0,u.jsx)("p",{className:"small",children:c.title}),(0,u.jsx)("p",{className:"small",children:new Date(o.airDate).getFullYear()})]}),(0,u.jsxs)("div",{className:"Season__actions",children:[void 0!==m&&(0,u.jsxs)("button",{className:"primary",onClick:w(m),disabled:0===m.sources.length,children:[e("Continue episode")," ",m.number]}),f.length>0&&(0,u.jsx)("button",{className:Y()({primary:void 0===m}),onClick:_(0),disabled:0===f[0].sources.length,children:e("Watch")}),(0,u.jsx)("a",{className:"button",id:"trailer",href:o.trailerUrl,target:"_blank",rel:"noopener noreferrer",children:e("Play trailer")})]}),(0,u.jsxs)("div",{className:"Season__episodes",children:[(0,u.jsx)("div",{className:Y()("Season__episodes__list",{shown:g}),children:f.slice(0,g?f.length:0).map((function(e,s){return(0,u.jsx)(ie,{episode:e,onClick:_(e.number)},s)}))}),f.length>0&&(0,u.jsx)("div",{className:"Season__episodes__toggle",onClick:b,children:e(g?"Hide episodes":"Show all episodes")})]}),(0,u.jsx)("p",{className:"Season__overview",children:o.summary}),(0,u.jsxs)("div",{className:"Season__people",children:[(0,u.jsxs)("div",{className:"Season__people__cast",children:[(0,u.jsx)("h4",{children:e("Starring")}),(0,u.jsx)(W,{people:o.cast,details:function(e){return e.character}})]}),(0,u.jsxs)("div",{className:"Season__people__crew",children:[(0,u.jsx)("h4",{children:e("Crew")}),(0,u.jsx)(W,{people:o.crew,details:function(s){return(0,d.FE)(e,s.job,s.gender)}})]})]})]})]}):(0,u.jsx)(U.T,{})},ae=n(4942),le=n(1413),ce=n(1611),de=function(){return(0,u.jsxs)(B.J,{className:"e-add",width:32,height:32,children:[(0,u.jsx)("title",{children:"Add"}),(0,u.jsxs)("g",{fill:"#ffffff",stroke:"#ffffff",children:[(0,u.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"16",x2:"16",y1:"2",y2:"30"}),(0,u.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"30",x2:"2",y1:"16",y2:"16"})]})]})},ue=n(5861),he=n(7757),fe=n.n(he),xe=n(6817),me=function(e){var s=e.className,n=e.icon,t=e.title,i=e.disabled,r=e.onClick;return(0,u.jsx)("div",{className:Y()("ProviderButton",{large:void 0!==t}),children:(0,u.jsxs)("button",{className:s,onClick:r,disabled:i,children:[n,t&&(0,u.jsx)("h3",{children:t})]})})},je=function(e){var s=e.onChoose,n=(0,x.$)().t,t=(0,r.useCallback)((function(e){return function(){return s(e)}}),[s]);return(0,u.jsxs)("div",{className:"ChooseProvider",children:[(0,u.jsx)("h2",{children:n("Add a provider")}),(0,u.jsx)("p",{children:n("Select which service you want to use to stream your movies & shows.")}),(0,u.jsx)("div",{className:"ChooseProvider__providers",children:xe.oJ.map((function(e,s){return(0,u.jsx)(me,{icon:(0,d.fF)(e),title:(0,d.pV)(n,e),disabled:xe.bz.includes(e),onClick:t(e)},s)}))})]})},ve=function(){return(0,u.jsxs)(B.J,{className:"c-check",width:24,height:24,children:[(0,u.jsx)("title",{children:"Check"}),(0,u.jsx)("g",{fill:"#ffffff",children:(0,u.jsx)("path",{d:"M12,0A12,12,0,1,0,24,12,12.035,12.035,0,0,0,12,0ZM10,17.414,4.586,12,6,10.586l4,4,8-8L19.414,8Z",fill:"#ffffff"})})]})},pe=function(e){var s=e.submitCaption,n=e.provider,t=e.onSubmit,o=(0,x.$)().t,a=(0,r.useMemo)((function(){return{name:null===n||void 0===n?void 0:n.name,host:null===n||void 0===n?void 0:n.host,port:(null===n||void 0===n?void 0:n.port)||21,username:null===n||void 0===n?void 0:n.username,password:null===n||void 0===n?void 0:n.password,secure:(null===n||void 0===n?void 0:n.secure)||!0}}),[n]),l=(0,r.useState)(a),c=(0,i.Z)(l,2),d=c[0],h=c[1],f=(0,r.useCallback)((function(e){var s=e.currentTarget;h((function(e){return(0,le.Z)((0,le.Z)({},e),{},(0,ae.Z)({},s.name,"checkbox"===s.type?s.checked:""===s.value?void 0:s.value))}))}),[h]),m=(0,r.useCallback)((function(e){e.preventDefault(),t({kind:xe.pl.FTP,name:d.name,host:d.host,port:d.port,username:d.username,password:d.password,secure:d.secure})}),[t,d]),j=(0,r.useCallback)((function(e){return void 0!==e&&""!==e}),[]),v=(0,r.useMemo)((function(){return j(d.name)&&j(d.host)&&j(d.port)&&j(d.username)&&j(d.password)}),[j,d]);return(0,r.useEffect)((function(){h(a)}),[a,h]),(0,u.jsxs)("form",{className:"FTPProviderForm",onSubmit:m,children:[(0,u.jsxs)("label",{children:[o("Name"),(0,u.jsx)("p",{className:"small",children:o("Friendly name to identify server, not used for connecting.")}),(0,u.jsxs)("div",{className:Y()("FTPProviderForm__input","warn",{valid:j(d.name)}),children:[(0,u.jsx)("input",{type:"text",name:"name",value:d.name||"",onChange:f}),(0,u.jsx)(ve,{})]})]}),(0,u.jsxs)("label",{children:[o("Host"),(0,u.jsxs)("div",{className:Y()("FTPProviderForm__input","warn",{valid:j(d.host)}),children:[(0,u.jsx)("input",{type:"text",name:"host",value:d.host||"",placeholder:"example.com",onChange:f}),(0,u.jsx)(ve,{})]})]}),(0,u.jsxs)("label",{children:[o("Port"),(0,u.jsxs)("div",{className:Y()("FTPProviderForm__input","warn",{valid:j(d.port)}),children:[(0,u.jsx)("input",{type:"number",min:0,step:1,name:"port",value:d.port||"",onChange:f}),(0,u.jsx)(ve,{})]})]}),(0,u.jsxs)("label",{children:[o("Username"),(0,u.jsxs)("div",{className:Y()("FTPProviderForm__input","warn",{valid:j(d.username)}),children:[(0,u.jsx)("input",{type:"text",name:"username",value:d.username||"",onChange:f}),(0,u.jsx)(ve,{})]})]}),(0,u.jsxs)("label",{children:[o("Password"),(0,u.jsxs)("div",{className:Y()("FTPProviderForm__input","warn",{valid:j(d.password)}),children:[(0,u.jsx)("input",{type:"password",name:"password",value:d.password||"",onChange:f}),(0,u.jsx)(ve,{})]})]}),(0,u.jsxs)("div",{className:"FTPProviderForm__checkbox",children:[(0,u.jsx)("input",{type:"checkbox",name:"secure",checked:d.secure,onChange:f}),(0,u.jsxs)("label",{children:[o("Secure"),(0,u.jsx)("p",{className:"small",children:o("Explicit FTPS over TLS.")})]})]}),(0,u.jsx)("div",{className:"FTPProviderForm__actions",children:(0,u.jsx)("button",{type:"submit",disabled:!v,children:s})})]})},ge=function(e){var s=e.kind,n=e.onEnteredDetails,t=(0,x.$)().t;return(0,u.jsxs)("div",{className:"EnterDetailsProvider",children:[(0,u.jsx)("h2",{children:t("Configure your provider")}),(0,u.jsx)("p",{children:t("Plaain needs some more details to connect to your provider.")}),s===xe.pl.FTP?(0,u.jsx)(pe,{submitCaption:t("Continue"),onSubmit:n}):null]})},be=n(4043),ye=function(e){var s=e.submitCaption,n=e.provider,t=e.onSubmit,o=(0,x.$)().t,a=(0,r.useMemo)((function(){return{moviesPath:null===n||void 0===n?void 0:n.moviesPath,showsPath:null===n||void 0===n?void 0:n.showsPath}}),[n]),l=(0,r.useState)(a),c=(0,i.Z)(l,2),d=c[0],h=c[1],f=(0,r.useCallback)((function(e){var s=e.currentTarget;h((function(e){return(0,le.Z)((0,le.Z)({},e),{},(0,ae.Z)({},s.name,""===s.value?void 0:s.value))}))}),[h]),m=(0,r.useCallback)((function(e){e.preventDefault(),t(d.moviesPath,d.showsPath)}),[t,d]),j=(0,r.useCallback)((function(e){return void 0!==e&&""!==e}),[]),v=(0,r.useCallback)((function(e){return void 0!==e&&e.startsWith("/")}),[]),p=(0,r.useMemo)((function(){return(!j(d.moviesPath)||v(d.moviesPath))&&(!j(d.showsPath)||v(d.showsPath))}),[j,v,d]);return(0,r.useEffect)((function(){h(a)}),[a,h]),(0,u.jsxs)("form",{className:"ProviderForm",onSubmit:m,children:[(0,u.jsxs)("label",{children:[o("Movies path"),(0,u.jsx)("p",{className:"small",children:o("The path from your home directory to where you keep your movies.")}),(0,u.jsxs)("div",{className:Y()("ProviderForm__input",{warn:j(d.moviesPath),valid:v(d.moviesPath)}),children:[(0,u.jsx)("input",{type:"text",name:"moviesPath",value:d.moviesPath||"",placeholder:"/Plaain/movies",onChange:f}),(0,u.jsx)(ve,{})]})]}),(0,u.jsxs)("label",{children:[o("Shows path"),(0,u.jsx)("p",{className:"small",children:o("The path from your home directory to where you keep your shows.")}),(0,u.jsxs)("div",{className:Y()("ProviderForm__input",{warn:j(d.showsPath),valid:v(d.showsPath)}),children:[(0,u.jsx)("input",{type:"text",name:"showsPath",value:d.showsPath||"",placeholder:"/Plaain/shows",onChange:f}),(0,u.jsx)(ve,{})]})]}),(0,u.jsx)("div",{className:"ProviderForm__actions",children:(0,u.jsx)("button",{type:"submit",disabled:!p,children:s})})]})},we=function(e){var s=e.onSetup,n=(0,x.$)().t;return(0,u.jsxs)("div",{className:"SetupProvider",children:[(0,u.jsx)("h2",{children:n("Setup your provider")}),(0,u.jsx)("p",{children:n("All that's left is to tell Plaain where to look for your movies and shows. You can always skip this step and come back later.")}),(0,u.jsx)(ye,{submitCaption:n("Complete"),onSubmit:s})]})},_e=n(5681),Ne=n(7740);!function(e){e[e.Choose=0]="Choose",e[e.EnterDetails=1]="EnterDetails",e[e.Setup=2]="Setup"}(J||(J={}));var ke,Pe=function(e){var s=e.isActive,n=e.onClose,t=e.onSetupAuth,o=e.onAddProvider,a=(0,_e.d)(),l=(0,i.Z)(a,2),c=l[0],d=l[1],h=(0,r.useMemo)((function(){return J.Choose}),[]),f=(0,r.useState)(h),x=(0,i.Z)(f,2),m=x[0],j=x[1],v=(0,r.useState)(),p=(0,i.Z)(v,2),g=p[0],b=p[1],y=(0,r.useState)(),w=(0,i.Z)(y,2),_=w[0],N=w[1];(0,Ne.b)((function(e){N(e),j(J.Setup),d()}));var k=(0,r.useCallback)((function(){n(),setTimeout((function(){j(h),b(void 0),N(void 0)}),500)}),[h,n,N,b,j]),P=(0,r.useCallback)(function(){var e=(0,ue.Z)(fe().mark((function e(s){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(s),e.t0=s,e.next=e.t0===xe.pl.FTP?4:e.t0===xe.pl.OneDrive?6:12;break;case 4:return j(J.EnterDetails),e.abrupt("return");case 6:return e.next=8,t({kind:s});case 8:return n=e.sent,N(n),j(J.Setup),e.abrupt("return");case 12:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),[N,b,t,j]),C=(0,r.useCallback)(function(){var e=(0,ue.Z)(fe().mark((function e(s){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(s);case 2:n=e.sent,N(n),j(J.Setup);case 5:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),[N,t]),S=(0,r.useCallback)((function(e,s){if(void 0!==_){var n=(0,le.Z)((0,le.Z)({},_),{},{moviesPath:e,showsPath:s});o(n),k()}}),[_,o,k]);return(0,u.jsx)("div",{className:"AddProviderModal",children:(0,u.jsx)(be.u,{isActive:s||c,onClose:k,children:m===J.Choose?(0,u.jsx)(je,{onChoose:P}):m===J.EnterDetails?(0,u.jsx)(ge,{kind:g,onEnteredDetails:C}):m===J.Setup?(0,u.jsx)(we,{onSetup:S}):null})})},Ce=n(1752),Se=n(8825),Ze=function(e){var s=e.onChange,n=(0,x.$)().t,t=(0,r.useCallback)((function(e){Se.ZP.changeLanguage(e.target.value),s&&s(e.target.value)}),[s]);return(0,u.jsx)("div",{className:"LanguageSelector",children:(0,u.jsx)("select",{defaultValue:Se.ZP.language,onChange:t,children:Ce.a.map((function(e){return(0,u.jsx)("option",{value:e,children:n(e)},e)}))})})};!function(e){e[e.Specific=0]="Specific",e[e.General=1]="General"}(ke||(ke={}));var Fe=function(e){var s=e.isActive,n=e.provider,t=e.onClose,o=e.onSetupAuth,a=e.onUpdateProvider,l=e.onRemoveProvider,c=(0,x.$)().t,h=(0,r.useMemo)((function(){return n.kind===xe.pl.FTP?ke.Specific:ke.General}),[n]),f=(0,r.useState)(h),m=(0,i.Z)(f,2),j=m[0],v=m[1],p=(0,r.useState)(),g=(0,i.Z)(p,2),b=g[0],y=g[1],w=(0,r.useCallback)((function(){t(),setTimeout((function(){v(h),y(void 0)}),500)}),[h,t,y,v]),_=(0,r.useCallback)(function(){var e=(0,ue.Z)(fe().mark((function e(s){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(s);case 2:n=e.sent,y(n),v(ke.General);case 5:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),[y,v]),N=(0,r.useCallback)((function(e,s){var t=void 0!==b?(0,le.Z)((0,le.Z)({},b),{},{moviesPath:e,showsPath:s}):(0,le.Z)((0,le.Z)({},n),{},{moviesPath:e,showsPath:s});a(t),w()}),[b,w,a,n]),k=(0,r.useCallback)((function(){window.confirm(c("Are you sure?"))&&(l(),w())}),[w,l,c]);return(0,u.jsx)("div",{className:"UpdateProviderModal",children:(0,u.jsxs)(be.u,{isActive:s,onClose:w,children:[(0,u.jsx)("h2",{children:(0,d.pV)(c,n.kind)}),(0,u.jsx)("p",{children:n.name}),j===ke.Specific?(0,u.jsx)(u.Fragment,{children:n.kind===xe.pl.FTP?(0,u.jsx)(pe,{submitCaption:c("Continue"),provider:n,onSubmit:_}):null}):j===ke.General?(0,u.jsx)(ye,{submitCaption:c("Update"),provider:n,onSubmit:N}):null,(0,u.jsx)("button",{className:"secondary",onClick:k,children:c("Remove")})]})})},Ae=n(4423),Me=n(6741),Te=function(){var e=(0,v.I0)(),s=(0,x.$)().t,n=(0,v.v9)((function(e){return(0,T.X)(e.auth)})),t=(0,r.useCallback)((function(s){return e((0,M.z)((0,Me.fH)(s)))}),[e]),o=(0,r.useCallback)((function(s){e((0,ce.P0)(s)),e((0,M.z)((0,A.Kz)([s])))}),[e]),a=(0,r.useCallback)((function(){return e((0,M.z)((0,A.Kz)(n)))}),[e,n]),l=(0,r.useCallback)((function(){return e((0,M.z)((0,A.R2)()))}),[e]),c=(0,r.useCallback)((function(s){return function(){return e((0,ce.C3)(s))}}),[e]),h=(0,_e.d)(),f=(0,i.Z)(h,3),m=f[0],j=f[1],p=f[2],g=(0,r.useState)(n.reduce((function(e,s,n){return(0,le.Z)((0,le.Z)({},e),{},(0,ae.Z)({},n,!1))}),{})),b=(0,i.Z)(g,2),y=b[0],w=b[1],_=(0,r.useCallback)((function(e){return function(){return w((function(s){return(0,le.Z)((0,le.Z)({},s),{},(0,ae.Z)({},e,!0))}))}}),[w]),N=(0,r.useCallback)((function(e){return function(){return w((function(s){return(0,le.Z)((0,le.Z)({},s),{},(0,ae.Z)({},e,!1))}))}}),[w]);return(0,u.jsxs)("div",{className:"Settings",children:[(0,u.jsxs)("section",{className:"Settings__auth",children:[(0,u.jsx)("h2",{children:s("Authentication")}),(0,u.jsx)("p",{children:s("Sign into your cloud to add your movies and TV shows to your library.")}),(0,u.jsx)("div",{className:"Settings__auth__scroll",children:(0,u.jsxs)("div",{className:"Settings__auth__providers",children:[n.map((function(e,s){return(0,u.jsxs)("div",{className:"Settings__auth__provider",children:[(0,u.jsx)(me,{className:Y()("primary",{warn:void 0===e.moviesPath&&void 0===e.showsPath}),icon:(0,d.fF)(e.kind),onClick:_(s)}),(0,u.jsx)(Fe,{isActive:y[s],provider:e,onClose:N(s),onSetupAuth:t,onUpdateProvider:o,onRemoveProvider:c(e.id)},7)]},s)})),(0,u.jsxs)("div",{className:"Settings__auth__provider",children:[(0,u.jsx)(me,{icon:(0,u.jsx)(de,{}),onClick:j},5),(0,u.jsx)(Pe,{isActive:m,onClose:p,onSetupAuth:t,onAddProvider:o},7)]},n.length)]})})]}),(0,u.jsxs)("section",{className:"Settings__indexing",children:[(0,u.jsx)("h2",{children:s("Indexing")}),(0,u.jsx)("p",{children:s("Index to look for new media on your linked services or fetch the latest metadata.")}),(0,u.jsxs)("div",{className:"Settings__indexing__actions",children:[(0,u.jsx)("button",{disabled:0===n.length,onClick:a,children:s("Index")}),(0,u.jsx)("button",{disabled:0===n.length,onClick:l,children:s("Update metadata")})]})]}),(0,u.jsxs)("section",{className:"Settings__language",children:[(0,u.jsx)("h2",{children:s("Language")}),(0,u.jsx)("p",{children:s("Change the display language.")}),(0,u.jsx)(Ze,{onChange:l})]}),(0,u.jsxs)("section",{className:"Settings__version",children:[(0,u.jsx)("h2",{children:s("Version")}),(0,u.jsx)("p",{children:s("Plaain {{version}}.",{version:Ae.q4})}),(0,u.jsx)("p",{className:"small",children:(0,u.jsxs)(Z.c,{children:["Plaain is"," ",(0,u.jsx)("a",{href:"https://github.com/jonhue/plaain",target:"_blank",rel:"noopener noreferrer",children:"open-source"}),". See the"," ",(0,u.jsx)("a",{href:"https://github.com/jonhue/plaain/releases",target:"_blank",rel:"noopener noreferrer",children:"changelog"}),"."]})}),(0,u.jsx)("p",{className:"small",children:(0,u.jsxs)(Z.c,{children:["You are running commit"," ",(0,u.jsx)("a",{href:"https://github.com/jonhue/plaain/commit/".concat("797f1476f84ba016e3a473f831fe0f6d4c1800b0"),target:"_blank",rel:"noopener noreferrer",children:(0,d.ZN)("797f1476f84ba016e3a473f831fe0f6d4c1800b0")}),"."]})}),(0,u.jsx)("p",{className:"small",children:(0,u.jsxs)(Z.c,{children:["Note that Plaain may ",(0,u.jsx)("span",{className:"bold",children:"not"})," be used to stream pirated content or publicly share your private media library. You may only connect to your private cloud storage."]})})]})]})},De=function(){var e=(0,x.$)().t,s=(0,t.UO)().id,n=(0,v.v9)((function(e){return(0,a.u)(s)(e.shows)})),i=(0,v.v9)((function(e){return n&&(0,d.wj)((0,y.OB)(n.id)(e.seasons),(function(e){return e.number}))}));return void 0!==n&&void 0!==i?(0,u.jsxs)("div",{className:"Show",children:[(0,u.jsx)($.Y,{url:(0,d.nC)(n.backdropPath)}),(0,u.jsxs)("div",{className:"Show__details",children:[(0,u.jsx)(h,{url:(0,d.zn)(n.posterPath),alt:"poster"}),(0,u.jsx)("h1",{children:n.title}),(0,u.jsx)("div",{className:"Show__information",children:(0,u.jsxs)("p",{className:"small",children:[new Date(n.firstAirDate).getFullYear()," -"," ",new Date(n.lastAirDate).getFullYear()]})}),(0,u.jsx)("p",{className:"Show__overview",children:n.summary})]}),i.length>0&&(0,u.jsxs)("div",{className:"Show__seasons",children:[(0,u.jsx)("h2",{children:e("Seasons")}),(0,u.jsx)(m,{items:i,id:"seasons"})]})]}):(0,u.jsx)(U.T,{})},$e=function(){var e=(0,v.v9)((function(e){return(0,d.a)((0,a.g)(e.shows),(function(e){return e.title}))}));return e.length>0?(0,u.jsxs)("div",{className:"Shows",children:[(0,u.jsx)(O,{items:e,path:"shows",id:"shows"}),(0,u.jsx)(V,{items:e})]}):(0,u.jsx)(t.Fg,{to:"/app"})},Ee=function(){var e=(0,v.v9)((function(e){return{moviesCount:Object.keys(e.movies).length,showsCount:Object.keys(e.shows).length}})),s=e.moviesCount,n=e.showsCount;return(0,u.jsxs)("div",{className:"App",children:[(0,u.jsxs)(t.Z5,{children:[(0,u.jsx)(t.AW,{path:"/",element:(0,u.jsx)(D,{})}),(0,u.jsx)(t.AW,{path:"movies/:id",element:(0,u.jsx)(L,{})}),(0,u.jsx)(t.AW,{path:"movies",element:(0,u.jsx)(R,{})}),(0,u.jsx)(t.AW,{path:"shows/:id",element:(0,u.jsx)(De,{})}),(0,u.jsx)(t.AW,{path:"shows",element:(0,u.jsx)($e,{})}),(0,u.jsx)(t.AW,{path:"seasons/:id",element:(0,u.jsx)(oe,{})}),(0,u.jsx)(t.AW,{path:"people/:id",element:(0,u.jsx)(te,{})}),(0,u.jsx)(t.AW,{path:"settings",element:(0,u.jsx)(Te,{})}),(0,u.jsx)(t.AW,{path:"find",element:(0,u.jsx)(g,{})}),(0,u.jsx)(t.AW,{path:"*",element:(0,u.jsx)(U.T,{})})]}),(0,u.jsx)(ne,{moviesDisabled:0===s,showsDisabled:0===n})]})}}}]);
//# sourceMappingURL=795.653b2cb5.chunk.js.map