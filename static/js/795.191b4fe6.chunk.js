"use strict";(self.webpackChunkplaain=self.webpackChunkplaain||[]).push([[795],{6695:function(e,s,n){n.r(s),n.d(s,{default:function(){return De}});var t=n(6871),i=n(885),r=n(2791),o=n(6469),a=n(4744),l=n(6089),c=n(8933),d=n(184),u=function(e){var s=e.url,n=e.alt;return(0,d.jsx)("img",{className:"Cover",src:s,alt:n})},h=n(3504),f=n(2020),x=function(e){var s=e.id,n=e.items,t=(0,f.$)().t;return(0,d.jsx)("div",{className:"HorizontalSlide",id:s,children:(0,d.jsx)(l.t,{spaceBetween:15,slidesPerView:"auto",slidesOffsetBefore:20,slidesOffsetAfter:20,grabCursor:!0,children:n.length>0?n.map((function(e,s){return(0,d.jsx)(l.o,{children:(0,d.jsx)(h.rU,{to:(0,c.Qf)(e),children:(0,d.jsx)(u,{url:(0,c.zn)(e.posterPath),alt:e.title})})},s)})):(0,d.jsx)(l.o,{children:(0,d.jsx)("h3",{children:t("Nothing found.")})})})})},m=n(1054),j=n(6030),v=function(e,s){var n=new m.Index({tokenize:"forward"});return e.forEach((function(e){return n.add(e.id,s(e))})),n},p=function(){var e=(0,f.$)().t,s=(0,t.s0)(),n=(0,t.TH)(),l=(0,r.useMemo)((function(){return new URLSearchParams(n.search).get("q")}),[n]),u=(0,j.v9)((function(e){return{movies:e.movies,shows:e.shows}})),h=u.movies,m=u.shows,p=(0,r.useState)(l||""),g=(0,i.Z)(p,2),b=g[0],y=g[1],w=(0,r.useMemo)((function(){return v((0,o.bJ)(h),(function(e){return"".concat(e.title,";").concat(e.summary)}))}),[h]),_=(0,r.useMemo)((function(){return v((0,a.g)(m),(function(e){return"".concat(e.title,";").concat(e.summary)}))}),[m]),N=(0,r.useMemo)((function(){return w.search(b).map((function(e){return(0,o.XA)(e)(h)})).filter(c.Av)}),[w,b]),k=(0,r.useMemo)((function(){return _.search(b).map((function(e){return(0,a.u)(e)(m)})).filter(c.Av)}),[_,b]),P=(0,r.useCallback)((function(e){s("/app/find?".concat("q","=").concat(e.target.value),{replace:!0}),y(e.target.value)}),[s,y]);return(0,o.bJ)(h).length>0||(0,a.g)(m).length>0?(0,d.jsxs)("div",{className:"Find",children:[(0,d.jsx)("form",{children:(0,d.jsx)("input",{autoFocus:!0,value:b,placeholder:e("Search your library"),onChange:P})}),N&&Object.keys(N).length>0&&(0,d.jsxs)("section",{children:[(0,d.jsx)("h2",{children:e("Movies")}),(0,d.jsx)(x,{items:N,id:"movies"})]}),k&&Object.keys(k).length>0&&(0,d.jsxs)("section",{children:[(0,d.jsx)("h2",{children:e("TV shows")}),(0,d.jsx)(x,{items:k,id:"shows"})]})]}):(0,d.jsx)(t.Fg,{to:"/app"})},g=n(2982),b=n(2154),y=n(5416),w=n(6916),_=(0,w.P1)([function(e){return(0,o.Wl)(e.movies)},function(e){return(0,b.Wl)(e.seasons)}],(function(e,s){return[].concat((0,g.Z)(e),(0,g.Z)(s))})),N=(0,w.P1)([function(e){return(0,o.rN)(e.movies)},function(e){return(0,b.rN)(e.seasons)}],(function(e,s){return[].concat((0,g.Z)(e),(0,g.Z)(s))})),k=function(e){var s=e.onIndex,n=(0,f.$)().t;return(0,d.jsxs)("div",{className:"Authenticated",children:[(0,d.jsx)("h2",{children:n("Get started")}),(0,d.jsx)("p",{children:n("You signed into a cloud service, but we didn't find any movies or TV shows.")}),(0,d.jsx)("p",{children:n("It's likely that you just have to move some of your files around and create some folders to make it work.")}),(0,d.jsx)("p",{children:n("Reference the getting started guide to learn how to organize your files so that Plaain finds them. After you're done, just re-index.")}),(0,d.jsxs)("div",{className:"Authenticated__buttons",children:[(0,d.jsx)("a",{className:"button primary",href:"https://github.com/jonhue/plaain#getting-started",target:"_blank",rel:"noopener noreferrer",children:n("Getting started")}),(0,d.jsx)("button",{onClick:s,children:n("Index")})]})]})},P=function(e){var s=e.inProgress,n=e.recentlyWatched,t=(0,f.$)().t;return(0,d.jsxs)("div",{className:"ForYou",children:[s.length>0&&(0,d.jsxs)("section",{children:[(0,d.jsx)("h2",{children:t("Continue watching")}),(0,d.jsx)(x,{items:s,id:"inProgress"})]}),n.length>0&&(0,d.jsxs)("section",{children:[(0,d.jsx)("h2",{children:t("Recently watched")}),(0,d.jsx)(x,{items:n,id:"recentlyWatched"})]})]})},C=function(e){var s=e.movies,n=e.shows,t=(0,f.$)().t;return(0,d.jsxs)("div",{className:"Setup",children:[(0,d.jsx)("h2",{children:t("Get started")}),(0,d.jsx)("p",{children:t("Here, you'll be able to find your recently watched movie or the show you didn't finish yet.")}),(0,d.jsxs)("div",{className:"Setup__buttons",children:[s.length>0&&(0,d.jsx)(h.rU,{to:"/app/movies",className:"button",children:t("Discover your movies")}),n.length>0&&(0,d.jsx)(h.rU,{to:"/app/shows",className:"button",children:t("Discover your shows")})]})]})},S=n(6899),Z=function(){var e=(0,f.$)().t;return(0,d.jsxs)("div",{className:"Unauthenticated",children:[(0,d.jsx)("h2",{children:e("Get started")}),(0,d.jsx)("p",{children:e("To watch your movies and TV shows, you first have to sign in with the cloud service that hosts your media.")}),(0,d.jsx)(h.rU,{to:"/app/settings",className:"button",children:e("Authenticate")}),(0,d.jsx)("p",{className:"small",children:(0,d.jsxs)(S.c,{children:["Note that Plaain may ",(0,d.jsx)("span",{className:"bold",children:"not"})," be used to stream pirated content or publicly share your private media library. You may only connect to your private cloud storage."]})})]})},F=n(4375),A=n(5939),M=n(607),T=function(){var e=(0,j.I0)(),s=(0,j.v9)((function(e){return{inProgress:(0,c.mE)(_(e)),movies:(0,o.bJ)(e.movies),providers:(0,M.X)(e.auth),recentlyWatched:(0,c.mE)(N(e)),shows:(0,a.g)(e.shows)}})),n=s.inProgress,t=s.movies,i=s.providers,l=s.recentlyWatched,u=s.shows,h=(0,r.useCallback)((function(){e((0,A.z)((0,F.Kz)(i)))}),[e,i]);return n.length>0||l.length>0?(0,d.jsx)(P,{inProgress:n,recentlyWatched:l}):0===i.length?(0,d.jsx)(Z,{}):0===t.length&&0===u.length?(0,d.jsx)(k,{onIndex:h}):(0,d.jsx)(C,{movies:t,shows:u})},D=n(5852),$=function(e){var s=e.files,n=(0,f.$)().t;return(0,d.jsxs)("div",{className:"FileList",children:[s.map((function(e,s){return(0,d.jsx)("p",{className:"small",children:e.name},s)})),0===s.length&&(0,d.jsx)("p",{className:"small",children:n("None")})]})},E=n(9462),U=function(e){var s=(0,r.useState)(e),n=(0,i.Z)(s,2),t=n[0],o=n[1];return[t,(0,r.useCallback)((function(){return o((function(e){return!e}))}),[o])]},z=function(e){var s=e.people,n=e.details,t=(0,f.$)().t,o=U(!0),a=(0,i.Z)(o,2),l=a[0],u=a[1],x=(0,r.useMemo)((function(){return s.slice(0,l?10:s.length)}),[l,s]);return(0,d.jsxs)("div",{className:"PersonList",children:[s.length>0?x.map((function(e,s){return(0,d.jsxs)("p",{children:[(0,d.jsx)(h.rU,{to:(0,c.Qf)(e),children:e.name})," \xb7"," ",(0,d.jsx)("span",{children:n(e)})]},s)})):(0,d.jsx)("p",{children:t("None")}),s.length>10&&(0,d.jsx)("span",{onClick:u,children:t(l?"Show more":"Show less")})]})},W=n(1694),I=n.n(W),Y=function(){var e=(0,f.$)().t,s=(0,t.s0)(),n=(0,t.UO)().id,i=(0,j.v9)((function(e){return(0,o.XA)(n)(e.movies)})),a=(0,r.useCallback)((function(){void 0!==i&&s("/player?id=".concat(i.id,"&type=").concat(i.kind,"&s=").concat(i.usage.progress))}),[i,s]),l=(0,r.useCallback)((function(){void 0!==i&&s("/player?id=".concat(i.id,"&type=").concat(i.kind))}),[i,s]);return void 0!==i?(0,d.jsxs)("div",{className:"Movie",children:[(0,d.jsx)(D.Y,{url:(0,c.nC)(i.backdropPath)}),(0,d.jsxs)("div",{className:"Movie__details",children:[(0,d.jsx)(u,{url:(0,c.zn)(i.posterPath),alt:"poster"}),(0,d.jsx)("h1",{children:i.title}),(0,d.jsxs)("div",{className:"Movie__information",children:[(0,d.jsx)("p",{className:"small",children:new Date(i.releaseDate).getFullYear()}),i.duration&&(0,d.jsx)("p",{className:"small",children:(0,c.a0)(e,i.duration)})]}),(0,d.jsxs)("div",{className:"Movie__actions",children:[(0,c.n2)(i)&&(0,d.jsx)("button",{className:"primary",onClick:a,disabled:0===i.sources.length,children:e("Continue")}),(0,d.jsx)("button",{className:I()({primary:!(0,c.n2)(i)}),onClick:l,disabled:0===i.sources.length,children:e("Watch")}),(0,d.jsx)("a",{className:"button",href:i.trailerUrl,target:"_blank",rel:"noopener noreferrer",children:e("Play trailer")})]}),(0,d.jsx)("p",{className:"Movie__overview",children:i.summary}),(0,d.jsxs)("div",{className:"Movie__people",children:[(0,d.jsxs)("div",{className:"Movie__people__cast",children:[(0,d.jsx)("h4",{children:e("Starring")}),(0,d.jsx)(z,{people:i.cast,details:function(e){return e.character}})]}),(0,d.jsxs)("div",{className:"Movie__people__crew",children:[(0,d.jsx)("h4",{children:e("Crew")}),(0,d.jsx)(z,{people:i.crew,details:function(s){return(0,c.FE)(e,s.job,s.gender)}})]})]})]}),(0,d.jsx)("div",{className:"Movie__sources",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{children:e("Sources")}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"Movie__sources__versions",children:[(0,d.jsx)("h5",{children:e("Versions")}),(0,d.jsx)($,{files:i.sources})]}),(0,d.jsxs)("div",{className:"Movie__sources__captions",children:[(0,d.jsx)("h5",{children:e("Subtitles")}),(0,d.jsx)($,{files:i.captions})]})]})]})})]}):(0,d.jsx)(E.T,{})},L=function(e){var s=e.items,n=(0,f.$)().t;return(0,d.jsx)("div",{className:"ItemGrid",children:s.length>0?s.map((function(e,s){return(0,d.jsx)("div",{className:"ItemGrid__item",children:(0,d.jsx)(h.rU,{to:(0,c.Qf)(e),children:(0,d.jsx)(u,{url:(0,c.zn)(e.posterPath),alt:e.title})})},s)})):(0,d.jsx)("div",{className:"ItemGrid__item",children:(0,d.jsx)("h3",{children:n("Nothing found.")})})})},V=n(6902);V.ZP.use([V.c4]);var G,H=function(e){var s=e.id,n=e.items,t=e.path,i=(0,f.$)().t;return(0,d.jsx)("div",{className:"VerticalSlide",id:s,children:(0,d.jsx)("div",{className:"VerticalSlide__wrapper",children:(0,d.jsx)(l.t,{direction:"horizontal",grabCursor:!0,effect:"cards",freeMode:!0,history:{replaceState:!0,key:t},children:n.length>0?n.map((function(e,s){return(0,d.jsx)(l.o,{"data-history":e.id,children:(0,d.jsx)(h.rU,{to:(0,c.Qf)(e),children:(0,d.jsx)(u,{url:(0,c.zn)(e.posterPath),alt:e.title})})},s)})):(0,d.jsx)(l.o,{children:(0,d.jsx)("h3",{children:i("Nothing found.")})})})})})},J=function(){var e=(0,j.v9)((function(e){return(0,c.a)((0,o.bJ)(e.movies),(function(e){return e.title}))}));return e.length>0?(0,d.jsxs)("div",{className:"Movies",children:[(0,d.jsx)(H,{items:e,path:"movies",id:"movies"}),(0,d.jsx)(L,{items:e})]}):(0,d.jsx)(t.Fg,{to:"/app"})},O=n(4607),R=function(){return(0,d.jsxs)(O.J,{className:"zoom",width:24,height:24,children:[(0,d.jsx)("title",{children:"Find"}),(0,d.jsxs)("g",{fill:"#ffffff",children:[(0,d.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"22",x2:"15.656",y1:"22",y2:"15.656"}),(0,d.jsx)("circle",{cx:"10",cy:"10",fill:"none",r:"8",stroke:"#ffffff"})]})]})},B=function(){return(0,d.jsxs)(O.J,{className:"popcorn",width:24,height:24,children:[(0,d.jsx)("title",{children:"For You"}),(0,d.jsxs)("g",{fill:"#ffffff",children:[(0,d.jsx)("polygon",{fill:"none",points:"21 7 3 7 5 23 19 23 21 7",stroke:"#ffffff"}),(0,d.jsx)("path",{d:"M19,5a3,3,0,0,0-3-3,2.97,2.97,0,0,0-1.47.4,2.986,2.986,0,0,0-5.06,0A2.97,2.97,0,0,0,8,2,3,3,0,0,0,5,5",fill:"none",stroke:"#ffffff"}),(0,d.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"9",x2:"8",y1:"23",y2:"7"}),(0,d.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"15",x2:"16",y1:"23",y2:"7"})]})]})},Q=function(){return(0,d.jsxs)(O.J,{className:"movie-61",width:24,height:24,children:[(0,d.jsx)("title",{children:"Movie"}),(0,d.jsxs)("g",{fill:"#ffffff",children:[(0,d.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"1",x2:"1",y1:"1",y2:"23"}),(0,d.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"23",x2:"23",y1:"1",y2:"23"}),(0,d.jsx)("rect",{height:"22",width:"14",fill:"none",stroke:"#ffffff",x:"5",y:"1"}),(0,d.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"1",x2:"23",y1:"12",y2:"12"}),(0,d.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"1",x2:"5",y1:"8",y2:"8"}),(0,d.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"1",x2:"5",y1:"4",y2:"4"}),(0,d.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"19",x2:"23",y1:"8",y2:"8"}),(0,d.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"19",x2:"23",y1:"4",y2:"4"}),(0,d.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"19",x2:"23",y1:"20",y2:"20"}),(0,d.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"19",x2:"23",y1:"16",y2:"16"}),(0,d.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"1",x2:"5",y1:"20",y2:"20"}),(0,d.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"1",x2:"5",y1:"16",y2:"16"})]})]})},X=function(){return(0,d.jsxs)(O.J,{className:"settings-gear",width:24,height:24,children:[(0,d.jsx)("title",{children:"Settings"}),(0,d.jsxs)("g",{fill:"#ffffff",stroke:"#ffffff",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",fill:"none",r:"3"}),(0,d.jsx)("path",{d:"M20,12a8.049,8.049,0,0,0-.188-1.713l2.714-2.055-2-3.464L17.383,6.094a7.987,7.987,0,0,0-2.961-1.719L14,1H10L9.578,4.375A7.987,7.987,0,0,0,6.617,6.094L3.474,4.768l-2,3.464,2.714,2.055a7.9,7.9,0,0,0,0,3.426L1.474,15.768l2,3.464,3.143-1.326a7.987,7.987,0,0,0,2.961,1.719L10,23h4l.422-3.375a7.987,7.987,0,0,0,2.961-1.719l3.143,1.326,2-3.464-2.714-2.055A8.049,8.049,0,0,0,20,12Z",fill:"none",stroke:"#ffffff"})]})]})},q=function(){return(0,d.jsxs)(O.J,{className:"desktop-screen",width:24,height:24,children:[(0,d.jsx)("title",{children:"Show"}),(0,d.jsxs)("g",{fill:"#ffffff",children:[(0,d.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"12",x2:"12",y1:"22",y2:"18"}),(0,d.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"6",x2:"18",y1:"22",y2:"22"}),(0,d.jsx)("rect",{height:"16",width:"22",fill:"none",stroke:"#ffffff",x:"1",y:"2"})]})]})},K=function(e){var s=e.children,n=e.to,i=e.inexact,r=e.disabled,o=e.forceActive,a=!!(0,t.bS)("".concat(n).concat(i?"/*":""));return(0,d.jsx)(h.rU,{className:I()("Tab",{active:a||o,disabled:r}),to:n,children:s})},ee=function(e){var s=e.moviesDisabled,n=e.showsDisabled,i=(0,f.$)().t;return(0,d.jsx)("div",{className:"Nav",children:(0,d.jsxs)("div",{className:"Nav__wrapper",children:[(0,d.jsxs)(K,{to:"/app",children:[(0,d.jsx)(B,{}),(0,d.jsx)("p",{children:i("For you")})]}),(0,d.jsxs)(K,{disabled:s,to:"/app/movies",inexact:!0,children:[(0,d.jsx)(Q,{}),(0,d.jsx)("p",{children:i("Movies")})]}),(0,d.jsxs)(K,{disabled:n,to:"/app/shows",inexact:!0,forceActive:!!(0,t.bS)("/app/seasons/*"),children:[(0,d.jsx)(q,{}),(0,d.jsx)("p",{children:i("Shows")})]}),(0,d.jsxs)(K,{disabled:s&&n,to:"/app/find",children:[(0,d.jsx)(R,{}),(0,d.jsx)("p",{children:i("Find")})]}),(0,d.jsxs)(K,{to:"/app/settings",children:[(0,d.jsx)(X,{}),(0,d.jsx)("p",{children:i("Settings")})]})]})})},se=function(){var e=(0,f.$)().t,s=(0,t.UO)().id,n=(0,j.v9)((function(e){return function(e){return(0,w.P1)([function(s){var n=s.movies;return(0,o.Hc)(e,(function(e){return e.cast}))(n)},function(s){var n=s.movies;return(0,o.Hc)(e,(function(e){return e.crew}))(n)},function(s){var n=s.seasons;return(0,b.nH)(e,(function(e){return e.cast}))(n)},function(s){var n=s.seasons;return(0,b.nH)(e,(function(e){return e.crew}))(n)}],(function(s,n,t,i){return[].concat((0,g.Z)(s),(0,g.Z)(n),(0,g.Z)(t),(0,g.Z)(i)).reduce((function(s,n){return{kind:y.m.Person,id:e,tmdbId:n.tmdbId,name:n.name,gender:n.gender,profilePath:n.profilePath,jobs:void 0===n.job?null===s||void 0===s?void 0:s.jobs:void 0!==s&&void 0!==s.jobs?(0,g.Z)(new Set([].concat((0,g.Z)(s.jobs),[n.job]))):[n.job]}}),void 0)}))}(s)(e)})),i=(0,j.v9)((function(e){return{movies:n&&(0,o.fw)(n.id)(e.movies),seasons:n&&(0,b.wT)(n.id)(e.seasons)}})),a=i.movies,l=i.seasons,h=(0,r.useMemo)((function(){return void 0!==a&&a.length>0?a[0].backdropPath:void 0!==l&&l.length>0?l[0].showBackdropPath:void 0}),[a,l]);return void 0!==n&&void 0!==a&&void 0!==l?(0,d.jsxs)("div",{className:"Person",children:[(0,d.jsx)(D.Y,{url:(0,c.nC)(h)}),(0,d.jsxs)("div",{className:"Person__details",children:[(0,d.jsx)(u,{url:(0,c.zn)(n.profilePath),alt:"profile"}),(0,d.jsx)("h1",{children:n.name}),n.jobs&&(0,d.jsx)("p",{children:n.jobs.map((function(s){return(0,c.FE)(e,s,n.gender)})).join(", ")})]}),a.length>0&&(0,d.jsxs)("div",{className:"Person__movies",children:[(0,d.jsx)("h2",{children:e("Movies")}),(0,d.jsx)(x,{items:a,id:"movies"})]}),l.length>0&&(0,d.jsxs)("div",{className:"Person__seasons",children:[(0,d.jsx)("h2",{children:e("TV seasons")}),(0,d.jsx)(x,{items:l,id:"seasons"})]})]}):(0,d.jsx)(E.T,{})},ne=function(e){var s=e.episode,n=e.onClick,t=(0,f.$)().t;return(0,d.jsxs)("div",{className:I()("EpisodeEntry",{disabled:0===s.sources.length}),onClick:n,children:[(0,d.jsx)("div",{className:"EpisodeEntry__number",children:s.number}),(0,d.jsxs)("div",{className:"EpisodeEntry__details",children:[(0,d.jsx)("h2",{children:s.title}),(0,d.jsxs)("p",{className:"small",children:[t("Aired")," ",new Date(s.airDate).toDateString()]}),(0,d.jsx)("p",{children:s.summary})]})]})},te=n(2690),ie=function(){var e=(0,f.$)().t,s=(0,t.s0)(),n=(0,t.UO)().id,o=(0,j.v9)((function(e){return(0,b.HR)(n)(e.seasons)})),l=(0,j.v9)((function(e){return{show:o&&(0,a.u)(o.showId)(e.shows),episodes:o&&(0,c.wj)((0,te.Mj)(o.id)(e.episodes),(function(e){return e.number}))}})),h=l.show,x=l.episodes,m=(0,r.useMemo)((function(){if(void 0!==o&&void 0!==x)return x.find((function(e){return e.number===o.usage.progress}))}),[o,x]),v=U(!1),p=(0,i.Z)(v,2),g=p[0],y=p[1],w=(0,r.useCallback)((function(e){return function(){s("/player?id=".concat(e.id,"&type=").concat(e.kind,"&s=").concat(e.usage.progress))}}),[s]),_=(0,r.useCallback)((function(e){return function(){if(void 0!==x){var n=x.find((function(s){return s.number===e}));s("/player?id=".concat(n.id,"&type=").concat(n.kind))}}}),[x,s]);return void 0!==h&&void 0!==o&&void 0!==x?(0,d.jsxs)("div",{className:"Season",children:[(0,d.jsx)(D.Y,{url:(0,c.nC)(o.showBackdropPath)}),(0,d.jsxs)("div",{className:"Season__details",children:[(0,d.jsx)(u,{url:(0,c.zn)(o.posterPath),alt:"poster"}),(0,d.jsxs)("h1",{children:[e("Season")," ",o.number]}),(0,d.jsxs)("div",{className:"Season__information",children:[(0,d.jsx)("p",{className:"small",children:h.title}),(0,d.jsx)("p",{className:"small",children:new Date(o.airDate).getFullYear()})]}),(0,d.jsxs)("div",{className:"Season__actions",children:[void 0!==m&&(0,d.jsxs)("button",{className:"primary",onClick:w(m),disabled:0===m.sources.length,children:[e("Continue episode")," ",m.number]}),x.length>0&&(0,d.jsx)("button",{className:I()({primary:void 0===m}),onClick:_(0),disabled:0===x[0].sources.length,children:e("Watch")}),(0,d.jsx)("a",{className:"button",id:"trailer",href:o.trailerUrl,target:"_blank",rel:"noopener noreferrer",children:e("Play trailer")})]}),(0,d.jsxs)("div",{className:"Season__episodes",children:[(0,d.jsx)("div",{className:I()("Season__episodes__list",{shown:g}),children:x.slice(0,g?x.length:0).map((function(e,s){return(0,d.jsx)(ne,{episode:e,onClick:_(e.number)},s)}))}),x.length>0&&(0,d.jsx)("div",{className:"Season__episodes__toggle",onClick:y,children:e(g?"Hide episodes":"Show all episodes")})]}),(0,d.jsx)("p",{className:"Season__overview",children:o.summary}),(0,d.jsxs)("div",{className:"Season__people",children:[(0,d.jsxs)("div",{className:"Season__people__cast",children:[(0,d.jsx)("h4",{children:e("Starring")}),(0,d.jsx)(z,{people:o.cast,details:function(e){return e.character}})]}),(0,d.jsxs)("div",{className:"Season__people__crew",children:[(0,d.jsx)("h4",{children:e("Crew")}),(0,d.jsx)(z,{people:o.crew,details:function(s){return(0,c.FE)(e,s.job,s.gender)}})]})]})]})]}):(0,d.jsx)(E.T,{})},re=n(4942),oe=n(1413),ae=n(1611),le=function(){return(0,d.jsxs)(O.J,{className:"e-add",width:32,height:32,children:[(0,d.jsx)("title",{children:"Add"}),(0,d.jsxs)("g",{fill:"#ffffff",stroke:"#ffffff",children:[(0,d.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"16",x2:"16",y1:"2",y2:"30"}),(0,d.jsx)("line",{fill:"none",stroke:"#ffffff",x1:"30",x2:"2",y1:"16",y2:"16"})]})]})},ce=n(5861),de=n(7757),ue=n.n(de),he=n(6817),fe=function(e){var s=e.className,n=e.icon,t=e.title,i=e.disabled,r=e.onClick;return(0,d.jsx)("div",{className:I()("ProviderButton",{large:void 0!==t}),children:(0,d.jsxs)("button",{className:s,onClick:r,disabled:i,children:[n,t&&(0,d.jsx)("h3",{children:t})]})})},xe=function(e){var s=e.onChoose,n=(0,f.$)().t,t=(0,r.useCallback)((function(e){return function(){return s(e)}}),[s]);return(0,d.jsxs)("div",{className:"ChooseProvider",children:[(0,d.jsx)("h2",{children:n("Add a provider")}),(0,d.jsx)("p",{children:n("Select which service you want to use to stream your movies & shows.")}),(0,d.jsx)("div",{className:"ChooseProvider__providers",children:he.oJ.map((function(e,s){return(0,d.jsx)(fe,{icon:(0,c.fF)(e),title:(0,c.pV)(n,e),disabled:he.bz.includes(e),onClick:t(e)},s)}))})]})},me=function(){return(0,d.jsxs)(O.J,{className:"c-check",width:24,height:24,children:[(0,d.jsx)("title",{children:"Check"}),(0,d.jsx)("g",{fill:"#ffffff",children:(0,d.jsx)("path",{d:"M12,0A12,12,0,1,0,24,12,12.035,12.035,0,0,0,12,0ZM10,17.414,4.586,12,6,10.586l4,4,8-8L19.414,8Z",fill:"#ffffff"})})]})},je=function(e){var s=e.submitCaption,n=e.provider,t=e.onSubmit,o=(0,f.$)().t,a=(0,r.useMemo)((function(){return{name:null===n||void 0===n?void 0:n.name,host:null===n||void 0===n?void 0:n.host,port:(null===n||void 0===n?void 0:n.port)||21,username:null===n||void 0===n?void 0:n.username,password:null===n||void 0===n?void 0:n.password,secure:(null===n||void 0===n?void 0:n.secure)||!0}}),[n]),l=(0,r.useState)(a),c=(0,i.Z)(l,2),u=c[0],h=c[1],x=(0,r.useCallback)((function(e){var s=e.currentTarget;h((function(e){return(0,oe.Z)((0,oe.Z)({},e),{},(0,re.Z)({},s.name,"checkbox"===s.type?s.checked:""===s.value?void 0:s.value))}))}),[h]),m=(0,r.useCallback)((function(e){e.preventDefault(),t({kind:he.pl.FTP,name:u.name,host:u.host,port:u.port,username:u.username,password:u.password,secure:u.secure})}),[t,u]),j=(0,r.useCallback)((function(e){return void 0!==e&&""!==e}),[]),v=(0,r.useMemo)((function(){return j(u.name)&&j(u.host)&&j(u.port)&&j(u.username)&&j(u.password)}),[j,u]);return(0,r.useEffect)((function(){h(a)}),[a,h]),(0,d.jsxs)("form",{className:"FTPProviderForm",onSubmit:m,children:[(0,d.jsxs)("label",{children:[o("Name"),(0,d.jsx)("p",{className:"small",children:o("Friendly name to identify server, not used for connecting.")}),(0,d.jsxs)("div",{className:I()("FTPProviderForm__input","warn",{valid:j(u.name)}),children:[(0,d.jsx)("input",{type:"text",name:"name",value:u.name||"",onChange:x}),(0,d.jsx)(me,{})]})]}),(0,d.jsxs)("label",{children:[o("Host"),(0,d.jsxs)("div",{className:I()("FTPProviderForm__input","warn",{valid:j(u.host)}),children:[(0,d.jsx)("input",{type:"text",name:"host",value:u.host||"",placeholder:"example.com",onChange:x}),(0,d.jsx)(me,{})]})]}),(0,d.jsxs)("label",{children:[o("Port"),(0,d.jsxs)("div",{className:I()("FTPProviderForm__input","warn",{valid:j(u.port)}),children:[(0,d.jsx)("input",{type:"number",min:0,step:1,name:"port",value:u.port||"",onChange:x}),(0,d.jsx)(me,{})]})]}),(0,d.jsxs)("label",{children:[o("Username"),(0,d.jsxs)("div",{className:I()("FTPProviderForm__input","warn",{valid:j(u.username)}),children:[(0,d.jsx)("input",{type:"text",name:"username",value:u.username||"",onChange:x}),(0,d.jsx)(me,{})]})]}),(0,d.jsxs)("label",{children:[o("Password"),(0,d.jsxs)("div",{className:I()("FTPProviderForm__input","warn",{valid:j(u.password)}),children:[(0,d.jsx)("input",{type:"password",name:"password",value:u.password||"",onChange:x}),(0,d.jsx)(me,{})]})]}),(0,d.jsxs)("div",{className:"FTPProviderForm__checkbox",children:[(0,d.jsx)("input",{type:"checkbox",name:"secure",checked:u.secure,onChange:x}),(0,d.jsxs)("label",{children:[o("Secure"),(0,d.jsx)("p",{className:"small",children:o("Explicit FTPS over TLS.")})]})]}),(0,d.jsx)("div",{className:"FTPProviderForm__actions",children:(0,d.jsx)("button",{type:"submit",disabled:!v,children:s})})]})},ve=function(e){var s=e.kind,n=e.onEnteredDetails,t=(0,f.$)().t;return(0,d.jsxs)("div",{className:"EnterDetailsProvider",children:[(0,d.jsx)("h2",{children:t("Configure your provider")}),(0,d.jsx)("p",{children:t("Plaain needs some more details to connect to your provider.")}),s===he.pl.FTP?(0,d.jsx)(je,{submitCaption:t("Continue"),onSubmit:n}):null]})},pe=n(4043),ge=function(e){var s=e.submitCaption,n=e.provider,t=e.onSubmit,o=(0,f.$)().t,a=(0,r.useMemo)((function(){return{moviesPath:null===n||void 0===n?void 0:n.moviesPath,showsPath:null===n||void 0===n?void 0:n.showsPath}}),[n]),l=(0,r.useState)(a),c=(0,i.Z)(l,2),u=c[0],h=c[1],x=(0,r.useCallback)((function(e){var s=e.currentTarget;h((function(e){return(0,oe.Z)((0,oe.Z)({},e),{},(0,re.Z)({},s.name,""===s.value?void 0:s.value))}))}),[h]),m=(0,r.useCallback)((function(e){e.preventDefault(),t(u.moviesPath,u.showsPath)}),[t,u]),j=(0,r.useCallback)((function(e){return void 0!==e&&""!==e}),[]),v=(0,r.useCallback)((function(e){return void 0!==e&&e.startsWith("/")}),[]),p=(0,r.useMemo)((function(){return(!j(u.moviesPath)||v(u.moviesPath))&&(!j(u.showsPath)||v(u.showsPath))}),[j,v,u]);return(0,r.useEffect)((function(){h(a)}),[a,h]),(0,d.jsxs)("form",{className:"ProviderForm",onSubmit:m,children:[(0,d.jsxs)("label",{children:[o("Movies path"),(0,d.jsx)("p",{className:"small",children:o("The path from your home directory to where you keep your movies.")}),(0,d.jsxs)("div",{className:I()("ProviderForm__input",{warn:j(u.moviesPath),valid:v(u.moviesPath)}),children:[(0,d.jsx)("input",{type:"text",name:"moviesPath",value:u.moviesPath||"",placeholder:"/Plaain/movies",onChange:x}),(0,d.jsx)(me,{})]})]}),(0,d.jsxs)("label",{children:[o("Shows path"),(0,d.jsx)("p",{className:"small",children:o("The path from your home directory to where you keep your shows.")}),(0,d.jsxs)("div",{className:I()("ProviderForm__input",{warn:j(u.showsPath),valid:v(u.showsPath)}),children:[(0,d.jsx)("input",{type:"text",name:"showsPath",value:u.showsPath||"",placeholder:"/Plaain/shows",onChange:x}),(0,d.jsx)(me,{})]})]}),(0,d.jsx)("div",{className:"ProviderForm__actions",children:(0,d.jsx)("button",{type:"submit",disabled:!p,children:s})})]})},be=function(e){var s=e.onSetup,n=(0,f.$)().t;return(0,d.jsxs)("div",{className:"SetupProvider",children:[(0,d.jsx)("h2",{children:n("Setup your provider")}),(0,d.jsx)("p",{children:n("All that's left is to tell Plaain where to look for your movies and shows. You can always skip this step and come back later.")}),(0,d.jsx)(ge,{submitCaption:n("Complete"),onSubmit:s})]})},ye=n(5681),we=n(7740);!function(e){e[e.Choose=0]="Choose",e[e.EnterDetails=1]="EnterDetails",e[e.Setup=2]="Setup"}(G||(G={}));var _e,Ne=function(e){var s=e.isActive,n=e.onClose,t=e.onSetupAuth,o=e.onAddProvider,a=(0,ye.d)(),l=(0,i.Z)(a,2),c=l[0],u=l[1],h=(0,r.useMemo)((function(){return G.Choose}),[]),f=(0,r.useState)(h),x=(0,i.Z)(f,2),m=x[0],j=x[1],v=(0,r.useState)(),p=(0,i.Z)(v,2),g=p[0],b=p[1],y=(0,r.useState)(),w=(0,i.Z)(y,2),_=w[0],N=w[1];(0,we.b)((function(e){N(e),j(G.Setup),u()}));var k=(0,r.useCallback)((function(){n(),setTimeout((function(){j(h),b(void 0),N(void 0)}),500)}),[h,n,N,b,j]),P=(0,r.useCallback)(function(){var e=(0,ce.Z)(ue().mark((function e(s){var n;return ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(s),e.t0=s,e.next=e.t0===he.pl.FTP?4:e.t0===he.pl.OneDrive?6:12;break;case 4:return j(G.EnterDetails),e.abrupt("return");case 6:return e.next=8,t({kind:s});case 8:return n=e.sent,N(n),j(G.Setup),e.abrupt("return");case 12:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),[N,b,t,j]),C=(0,r.useCallback)(function(){var e=(0,ce.Z)(ue().mark((function e(s){var n;return ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(s);case 2:n=e.sent,N(n),j(G.Setup);case 5:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),[N,t]),S=(0,r.useCallback)((function(e,s){if(void 0!==_){var n=(0,oe.Z)((0,oe.Z)({},_),{},{moviesPath:e,showsPath:s});o(n),k()}}),[_,o,k]);return(0,d.jsx)("div",{className:"AddProviderModal",children:(0,d.jsx)(pe.u,{isActive:s||c,onClose:k,children:m===G.Choose?(0,d.jsx)(xe,{onChoose:P}):m===G.EnterDetails?(0,d.jsx)(ve,{kind:g,onEnteredDetails:C}):m===G.Setup?(0,d.jsx)(be,{onSetup:S}):null})})},ke=n(1752),Pe=n(8825),Ce=function(e){var s=e.onChange,n=(0,f.$)().t,t=(0,r.useCallback)((function(e){Pe.ZP.changeLanguage(e.target.value),s&&s(e.target.value)}),[s]);return(0,d.jsx)("div",{className:"LanguageSelector",children:(0,d.jsx)("select",{defaultValue:Pe.ZP.language,onChange:t,children:ke.a.map((function(e){return(0,d.jsx)("option",{value:e,children:n(e)},e)}))})})};!function(e){e[e.Specific=0]="Specific",e[e.General=1]="General"}(_e||(_e={}));var Se=function(e){var s=e.isActive,n=e.provider,t=e.onClose,o=e.onSetupAuth,a=e.onUpdateProvider,l=e.onRemoveProvider,u=(0,f.$)().t,h=(0,r.useMemo)((function(){return n.kind===he.pl.FTP?_e.Specific:_e.General}),[n]),x=(0,r.useState)(h),m=(0,i.Z)(x,2),j=m[0],v=m[1],p=(0,r.useState)(),g=(0,i.Z)(p,2),b=g[0],y=g[1],w=(0,r.useCallback)((function(){t(),setTimeout((function(){v(h),y(void 0)}),500)}),[h,t,y,v]),_=(0,r.useCallback)(function(){var e=(0,ce.Z)(ue().mark((function e(s){var n;return ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(s);case 2:n=e.sent,y(n),v(_e.General);case 5:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),[y,v]),N=(0,r.useCallback)((function(e,s){var t=void 0!==b?(0,oe.Z)((0,oe.Z)({},b),{},{moviesPath:e,showsPath:s}):(0,oe.Z)((0,oe.Z)({},n),{},{moviesPath:e,showsPath:s});a(t),w()}),[b,w,a,n]),k=(0,r.useCallback)((function(){window.confirm(u("Are you sure?"))&&(l(),w())}),[w,l,u]);return(0,d.jsx)("div",{className:"UpdateProviderModal",children:(0,d.jsxs)(pe.u,{isActive:s,onClose:w,children:[(0,d.jsx)("h2",{children:(0,c.pV)(u,n.kind)}),(0,d.jsx)("p",{children:n.name}),j===_e.Specific?(0,d.jsx)(d.Fragment,{children:n.kind===he.pl.FTP?(0,d.jsx)(je,{submitCaption:u("Continue"),provider:n,onSubmit:_}):null}):j===_e.General?(0,d.jsx)(ge,{submitCaption:u("Update"),provider:n,onSubmit:N}):null,(0,d.jsx)("button",{className:"secondary",onClick:k,children:u("Remove")})]})})},Ze=n(4423),Fe=n(6741),Ae=function(){var e=(0,j.I0)(),s=(0,f.$)().t,n=(0,j.v9)((function(e){return(0,M.X)(e.auth)})),t=(0,r.useCallback)((function(s){return e((0,A.z)((0,Fe.fH)(s)))}),[e]),o=(0,r.useCallback)((function(s){e((0,ae.P0)(s)),e((0,A.z)((0,F.Kz)([s])))}),[e]),a=(0,r.useCallback)((function(){return e((0,A.z)((0,F.Kz)(n)))}),[e,n]),l=(0,r.useCallback)((function(){return e((0,A.z)((0,F.R2)()))}),[e]),u=(0,r.useCallback)((function(s){return function(){return e((0,ae.C3)(s))}}),[e]),h=(0,ye.d)(),x=(0,i.Z)(h,3),m=x[0],v=x[1],p=x[2],g=(0,r.useState)(n.reduce((function(e,s,n){return(0,oe.Z)((0,oe.Z)({},e),{},(0,re.Z)({},n,!1))}),{})),b=(0,i.Z)(g,2),y=b[0],w=b[1],_=(0,r.useCallback)((function(e){return function(){return w((function(s){return(0,oe.Z)((0,oe.Z)({},s),{},(0,re.Z)({},e,!0))}))}}),[w]),N=(0,r.useCallback)((function(e){return function(){return w((function(s){return(0,oe.Z)((0,oe.Z)({},s),{},(0,re.Z)({},e,!1))}))}}),[w]);return(0,d.jsxs)("div",{className:"Settings",children:[(0,d.jsxs)("section",{className:"Settings__auth",children:[(0,d.jsx)("h2",{children:s("Authentication")}),(0,d.jsx)("p",{children:s("Sign into your cloud to add your movies and TV shows to your library.")}),(0,d.jsx)("div",{className:"Settings__auth__scroll",children:(0,d.jsxs)("div",{className:"Settings__auth__providers",children:[n.map((function(e,s){return(0,d.jsxs)("div",{className:"Settings__auth__provider",children:[(0,d.jsx)(fe,{className:I()("primary",{warn:void 0===e.moviesPath&&void 0===e.showsPath}),icon:(0,c.fF)(e.kind),onClick:_(s)}),(0,d.jsx)(Se,{isActive:y[s],provider:e,onClose:N(s),onSetupAuth:t,onUpdateProvider:o,onRemoveProvider:u(e.id)},7)]},s)})),(0,d.jsxs)("div",{className:"Settings__auth__provider",children:[(0,d.jsx)(fe,{icon:(0,d.jsx)(le,{}),onClick:v},5),(0,d.jsx)(Ne,{isActive:m,onClose:p,onSetupAuth:t,onAddProvider:o},7)]},n.length)]})})]}),(0,d.jsxs)("section",{className:"Settings__indexing",children:[(0,d.jsx)("h2",{children:s("Indexing")}),(0,d.jsx)("p",{children:s("Index to look for new media on your linked services or fetch the latest metadata.")}),(0,d.jsxs)("div",{className:"Settings__indexing__actions",children:[(0,d.jsx)("button",{disabled:0===n.length,onClick:a,children:s("Index")}),(0,d.jsx)("button",{disabled:0===n.length,onClick:l,children:s("Update metadata")})]})]}),(0,d.jsxs)("section",{className:"Settings__language",children:[(0,d.jsx)("h2",{children:s("Language")}),(0,d.jsx)("p",{children:s("Change the display language.")}),(0,d.jsx)(Ce,{onChange:l})]}),(0,d.jsxs)("section",{className:"Settings__version",children:[(0,d.jsx)("h2",{children:s("Version")}),(0,d.jsx)("p",{children:s("Plaain {{version}}.",{version:Ze.q4})}),(0,d.jsx)("p",{className:"small",children:(0,d.jsxs)(S.c,{children:["Plaain is"," ",(0,d.jsx)("a",{href:"https://github.com/jonhue/plaain",target:"_blank",rel:"noopener noreferrer",children:"open-source"}),". See the"," ",(0,d.jsx)("a",{href:"https://github.com/jonhue/plaain/releases",target:"_blank",rel:"noopener noreferrer",children:"changelog"}),"."]})}),(0,d.jsx)("p",{className:"small",children:(0,d.jsxs)(S.c,{children:["You are running commit"," ",(0,d.jsx)("a",{href:"https://github.com/jonhue/plaain/commit/".concat("6219dd1fbd8831fe759a6a282a66f909808379ed"),target:"_blank",rel:"noopener noreferrer",children:(0,c.ZN)("6219dd1fbd8831fe759a6a282a66f909808379ed")}),"."]})}),(0,d.jsx)("p",{className:"small",children:(0,d.jsxs)(S.c,{children:["Note that Plaain may ",(0,d.jsx)("span",{className:"bold",children:"not"})," be used to stream pirated content or publicly share your private media library. You may only connect to your private cloud storage."]})})]})]})},Me=function(){var e=(0,f.$)().t,s=(0,t.UO)().id,n=(0,j.v9)((function(e){return(0,a.u)(s)(e.shows)})),i=(0,j.v9)((function(e){return n&&(0,c.wj)((0,b.OB)(n.id)(e.seasons),(function(e){return e.number}))}));return void 0!==n&&void 0!==i?(0,d.jsxs)("div",{className:"Show",children:[(0,d.jsx)(D.Y,{url:(0,c.nC)(n.backdropPath)}),(0,d.jsxs)("div",{className:"Show__details",children:[(0,d.jsx)(u,{url:(0,c.zn)(n.posterPath),alt:"poster"}),(0,d.jsx)("h1",{children:n.title}),(0,d.jsx)("div",{className:"Show__information",children:(0,d.jsxs)("p",{className:"small",children:[new Date(n.firstAirDate).getFullYear()," -"," ",new Date(n.lastAirDate).getFullYear()]})}),(0,d.jsx)("p",{className:"Show__overview",children:n.summary})]}),i.length>0&&(0,d.jsxs)("div",{className:"Show__seasons",children:[(0,d.jsx)("h2",{children:e("Seasons")}),(0,d.jsx)(x,{items:i,id:"seasons"})]})]}):(0,d.jsx)(E.T,{})},Te=function(){var e=(0,j.v9)((function(e){return(0,c.a)((0,a.g)(e.shows),(function(e){return e.title}))}));return e.length>0?(0,d.jsxs)("div",{className:"Shows",children:[(0,d.jsx)(H,{items:e,path:"shows",id:"shows"}),(0,d.jsx)(L,{items:e})]}):(0,d.jsx)(t.Fg,{to:"/app"})},De=function(){var e=(0,j.v9)((function(e){return{moviesCount:Object.keys(e.movies).length,showsCount:Object.keys(e.shows).length}})),s=e.moviesCount,n=e.showsCount;return(0,d.jsxs)("div",{className:"App",children:[(0,d.jsxs)(t.Z5,{children:[(0,d.jsx)(t.AW,{path:"/",element:(0,d.jsx)(T,{})}),(0,d.jsx)(t.AW,{path:"movies/:id",element:(0,d.jsx)(Y,{})}),(0,d.jsx)(t.AW,{path:"movies",element:(0,d.jsx)(J,{})}),(0,d.jsx)(t.AW,{path:"shows/:id",element:(0,d.jsx)(Me,{})}),(0,d.jsx)(t.AW,{path:"shows",element:(0,d.jsx)(Te,{})}),(0,d.jsx)(t.AW,{path:"seasons/:id",element:(0,d.jsx)(ie,{})}),(0,d.jsx)(t.AW,{path:"people/:id",element:(0,d.jsx)(se,{})}),(0,d.jsx)(t.AW,{path:"settings",element:(0,d.jsx)(Ae,{})}),(0,d.jsx)(t.AW,{path:"find",element:(0,d.jsx)(p,{})}),(0,d.jsx)(t.AW,{path:"*",element:(0,d.jsx)(E.T,{})})]}),(0,d.jsx)(ee,{moviesDisabled:0===s,showsDisabled:0===n})]})}}}]);
//# sourceMappingURL=795.191b4fe6.chunk.js.map